(function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(e,n){var r=typeof n;if(e=e.cache,"boolean"==r||null==n)return e[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:g+n;return e=(e=e[r])&&e[i],"object"==r?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:g+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function r(t){return t.charCodeAt(0)}function i(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var a=n[i],s=r[i];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return t.index-e.index}function o(t){var e=-1,r=t.length,i=t[0],o=t[r/2|0],a=t[r-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var s=u();s["false"]=s["null"]=s["true"]=s.undefined=!1;var l=u();for(l.array=t,l.cache=s,l.push=n;++e<r;)l.push(t[e]);return l}function a(t){return"\\"+$[t]}function s(){return d.pop()||[]}function u(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(t){t.length=0,d.length<b&&d.push(t)}function c(t){var e=t.cache;e&&c(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,m.length<b&&m.push(t)}function f(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}function h(n){function d(t){return t&&"object"==typeof t&&!Jr(t)&&Sr.call(t,"__wrapped__")?t:new m(t)}function m(t,e){this.__chain__=!!e,this.__wrapped__=t}function b(t){function e(){if(r){var t=f(r);Lr.apply(t,arguments)}if(this instanceof e){var o=q(n.prototype),a=n.apply(o,t||arguments);return Ce(a)?a:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return Gr(e,t),e}function $(t,e,n,r,i){if(n){var o=n(t);if("undefined"!=typeof o)return o}var a=Ce(t);if(!a)return t;var u=Hr.call(t);if(!W[u])return t;var c=qr[u];switch(u){case z:case A:return new c(+t);case F:case V:return new c(t);case N:return o=c(t.source,k.exec(t)),o.lastIndex=t.lastIndex,o}var h=Jr(t);if(e){var p=!r;r||(r=s()),i||(i=s());for(var d=r.length;d--;)if(r[d]==t)return i[d];o=h?c(t.length):{}}else o=h?f(t):oi({},t);return h&&(Sr.call(t,"index")&&(o.index=t.index),Sr.call(t,"input")&&(o.input=t.input)),e?(r.push(t),i.push(o),(h?Ke:ui)(t,function(t,a){o[a]=$(t,e,n,r,i)}),p&&(l(r),l(i)),o):o}function q(t){return Ce(t)?Ir(t):{}}function K(t,e,n){if("function"!=typeof t)return Jn;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Kr.funcNames&&(r=!t.name),r=r||!Kr.funcDecomp,!r)){var i=Pr.call(t);Kr.funcNames||(r=!x.test(i)),r||(r=C.test(i),Gr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Ln(t,e)}function G(t){function e(){var t=u?a:this;if(i){var d=f(i);Lr.apply(d,arguments)}if((o||c)&&(d||(d=f(arguments)),o&&Lr.apply(d,o),c&&d.length<s))return r|=16,G([n,h?r:-4&r,d,null,a,s]);if(d||(d=arguments),l&&(n=t[p]),this instanceof e){t=q(n.prototype);var m=n.apply(t,d);return Ce(m)?m:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=1&r,l=2&r,c=4&r,h=8&r,p=n;return Gr(e,t),e}function J(n,r){var i=-1,a=ue(),s=n?n.length:0,u=s>=y&&a===t,l=[];if(u){var f=o(r);f?(a=e,r=f):u=!1}for(;++i<s;){var h=n[i];a(r,h)<0&&l.push(h)}return u&&c(r),l}function te(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];++i<o;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Jr(s)||he(s))){e||(s=te(s,e,n));var u=-1,l=s.length,c=a.length;for(a.length+=l;++u<l;)a[c++]=s[u]}else n||a.push(s)}return a}function ee(t,e,n,r,i,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var u=typeof t,c=typeof e;if(!(t!==t||t&&U[u]||e&&U[c]))return!1;if(null==t||null==e)return t===e;var f=Hr.call(t),h=Hr.call(e);if(f==S&&(f=I),h==S&&(h=I),f!=h)return!1;switch(f){case z:case A:return+t==+e;case F:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case N:case V:return t==wr(e)}var p=f==L;if(!p){var d=Sr.call(t,"__wrapped__"),m=Sr.call(e,"__wrapped__");if(d||m)return ee(d?t.__wrapped__:t,m?e.__wrapped__:e,n,r,i,o);if(f!=I)return!1;var v=t.constructor,g=e.constructor;if(v!=g&&!(je(v)&&v instanceof v&&je(g)&&g instanceof g)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=s()),o||(o=s());for(var b=i.length;b--;)if(i[b]==t)return o[b]==e;var E=0;if(a=!0,i.push(t),o.push(e),p){if(b=t.length,E=e.length,a=E==b,a||r)for(;E--;){var _=b,w=e[E];if(r)for(;_--&&!(a=ee(t[_],w,n,r,i,o)););else if(!(a=ee(t[E],w,n,r,i,o)))break}}else si(e,function(e,s,u){return Sr.call(u,s)?(E++,a=Sr.call(t,s)&&ee(t[s],e,n,r,i,o)):void 0}),a&&!r&&si(t,function(t,e,n){return Sr.call(n,e)?a=--E>-1:void 0});return i.pop(),o.pop(),y&&(l(i),l(o)),a}function ne(t,e,n,r,i){(Jr(e)?Ke:ui)(e,function(e,o){var a,s,u=e,l=t[o];if(e&&((s=Jr(e))||li(e))){for(var c=r.length;c--;)if(a=r[c]==e){l=i[c];break}if(!a){var f;n&&(u=n(l,e),(f="undefined"!=typeof u)&&(l=u)),f||(l=s?Jr(l)?l:[]:li(l)?l:{}),r.push(e),i.push(l),f||ne(l,e,n,r,i)}}else n&&(u=n(l,e),"undefined"==typeof u&&(u=e)),"undefined"!=typeof u&&(l=u);t[o]=l})}function re(t,e){return t+Br(Zr()*(e-t+1))}function ie(n,r,i){var a=-1,u=ue(),f=n?n.length:0,h=[],p=!r&&f>=y&&u===t,d=i||p?s():h;if(p){var m=o(d);u=e,d=m}for(;++a<f;){var v=n[a],g=i?i(v,a,n):v;(r?!a||d[d.length-1]!==g:u(d,g)<0)&&((i||p)&&d.push(g),h.push(v))}return p?(l(d.array),c(d)):i&&l(d),h}function oe(t){return function(e,n,r){var i={};n=d.createCallback(n,r,3);var o=-1,a=e?e.length:0;if("number"==typeof a)for(;++o<a;){var s=e[o];t(i,s,n(s,o,e),e)}else ui(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function ae(t,e,n,r,i,o){var a=1&e,s=2&e,u=4&e,l=16&e,c=32&e;if(!s&&!je(t))throw new Tr;l&&!n.length&&(e&=-17,l=n=!1),c&&!r.length&&(e&=-33,c=r=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=f(h),h[2]&&(h[2]=f(h[2])),h[3]&&(h[3]=f(h[3])),!a||1&h[1]||(h[4]=i),!a&&1&h[1]&&(e|=8),!u||4&h[1]||(h[5]=o),l&&Lr.apply(h[2]||(h[2]=[]),n),c&&Dr.apply(h[3]||(h[3]=[]),r),h[1]|=e,ae.apply(null,h);var p=1==e||17===e?b:G;return p([t,e,n,r,i,o])}function se(t){return ei[t]}function ue(){var e=(e=d.indexOf)===yn?t:e;return e}function le(t){return"function"==typeof t&&Mr.test(t)}function ce(t){var e,n;return t&&Hr.call(t)==I&&(e=t.constructor,!je(e)||e instanceof e)?(si(t,function(t,e){n=e}),"undefined"==typeof n||Sr.call(t,n)):!1}function fe(t){return ni[t]}function he(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Hr.call(t)==S||!1}function pe(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),$(t,e,"function"==typeof n&&K(n,r,1))}function de(t,e,n){return $(t,!0,"function"==typeof e&&K(e,n,1))}function me(t,e){var n=q(t);return e?oi(n,e):n}function ve(t,e,n){var r;return e=d.createCallback(e,n,3),ui(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function ge(t,e,n){var r;return e=d.createCallback(e,n,3),be(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r}function ye(t,e,n){var r=[];si(t,function(t,e){r.push(e,t)});var i=r.length;for(e=K(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function be(t,e,n){var r=ti(t),i=r.length;for(e=K(e,n,3);i--;){var o=r[i];if(e(t[o],o,t)===!1)break}return t}function Ee(t){var e=[];return si(t,function(t,n){je(t)&&e.push(n)}),e.sort()}function _e(t,e){return t?Sr.call(t,e):!1}function we(t){for(var e=-1,n=ti(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function Te(t){return t===!0||t===!1||t&&"object"==typeof t&&Hr.call(t)==z||!1}function Re(t){return t&&"object"==typeof t&&Hr.call(t)==A||!1}function ke(t){return t&&1===t.nodeType||!1}function xe(t){var e=!0;if(!t)return e;var n=Hr.call(t),r=t.length;return n==L||n==V||n==S||n==I&&"number"==typeof r&&je(t.splice)?!r:(ui(t,function(){return e=!1}),e)}function He(t,e,n,r){return ee(t,e,"function"==typeof n&&K(n,r,2))}function Me(t){return Vr(t)&&!Wr(parseFloat(t))}function je(t){return"function"==typeof t}function Ce(t){return!(!t||!U[typeof t])}function Be(t){return Oe(t)&&t!=+t}function Pe(t){return null===t}function Oe(t){return"number"==typeof t||t&&"object"==typeof t&&Hr.call(t)==F||!1}function Se(t){return t&&"object"==typeof t&&Hr.call(t)==N||!1}function Le(t){return"string"==typeof t||t&&"object"==typeof t&&Hr.call(t)==V||!1}function ze(t){return"undefined"==typeof t}function Ae(t,e,n){var r={};return e=d.createCallback(e,n,3),ui(t,function(t,n,i){r[n]=e(t,n,i)}),r}function De(t){var e=arguments,n=2;if(!Ce(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=K(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=f(arguments,1,n),o=-1,a=s(),u=s();++o<n;)ne(t,i[o],r,a,u);return l(a),l(u),t}function Fe(t,e,n){var r={};if("function"!=typeof e){var i=[];si(t,function(t,e){i.push(e)}),i=J(i,te(arguments,!0,!1,1));for(var o=-1,a=i.length;++o<a;){var s=i[o];r[s]=t[s]}}else e=d.createCallback(e,n,3),si(t,function(t,n,i){e(t,n,i)||(r[n]=t)});return r}function Ie(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Ne(t,e,n){var r={};if("function"!=typeof e)for(var i=-1,o=te(arguments,!0,!1,1),a=Ce(t)?o.length:0;++i<a;){var s=o[i];s in t&&(r[s]=t[s])}else e=d.createCallback(e,n,3),si(t,function(t,n,i){e(t,n,i)&&(r[n]=t)});return r}function Ve(t,e,n,r){var i=Jr(t);if(null==n)if(i)n=[];else{var o=t&&t.constructor,a=o&&o.prototype;n=q(a)}return e&&(e=d.createCallback(e,r,4),(i?Ke:ui)(t,function(t,r,i){return e(n,t,r,i)})),n}function We(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;)i[e]=t[n[e]];return i}function Xe(t){for(var e=arguments,n=-1,r=te(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,o=dr(i);++n<i;)o[n]=t[r[n]];return o}function Ye(t,e,n){var r=-1,i=ue(),o=t?t.length:0,a=!1;return n=(0>n?Yr(0,o+n):n)||0,Jr(t)?a=i(t,e,n)>-1:"number"==typeof o?a=(Le(t)?t.indexOf(e,n):i(t,e,n))>-1:ui(t,function(t){return++r>=n?!(a=t===e):void 0}),a}function Ue(t,e,n){var r=!0;e=d.createCallback(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(t[i],i,t)););else ui(t,function(t,n,i){return r=!!e(t,n,i)});return r}function $e(t,e,n){var r=[];e=d.createCallback(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o;){var a=t[i];e(a,i,t)&&r.push(a)}else ui(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function Ze(t,e,n){e=d.createCallback(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return ui(t,function(t,n,r){return e(t,n,r)?(o=t,!1):void 0}),o}for(;++r<i;){var a=t[r];if(e(a,r,t))return a}}function qe(t,e,n){var r;return e=d.createCallback(e,n,3),Ge(t,function(t,n,i){return e(t,n,i)?(r=t,!1):void 0}),r}function Ke(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:K(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else ui(t,e);return t}function Ge(t,e,n){var r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:K(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var i=ti(t);r=i.length,ui(t,function(t,n,o){return n=i?i[--r]:--r,e(o[n],n,o)})}return t}function Je(t,e){var n=f(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=dr("number"==typeof o?o:0);return Ke(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function Qe(t,e,n){var r=-1,i=t?t.length:0;if(e=d.createCallback(e,n,3),"number"==typeof i)for(var o=dr(i);++r<i;)o[r]=e(t[r],r,t);else o=[],ui(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function tn(t,e,n){var i=-1/0,o=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Jr(t))for(var a=-1,s=t.length;++a<s;){var u=t[a];u>o&&(o=u)}else e=null==e&&Le(t)?r:d.createCallback(e,n,3),Ke(t,function(t,n,r){var a=e(t,n,r);a>i&&(i=a,o=t)});return o}function en(t,e,n){var i=1/0,o=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Jr(t))for(var a=-1,s=t.length;++a<s;){var u=t[a];o>u&&(o=u)}else e=null==e&&Le(t)?r:d.createCallback(e,n,3),Ke(t,function(t,n,r){var a=e(t,n,r);i>a&&(i=a,o=t)});return o}function nn(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=d.createCallback(e,r,4);var o=-1,a=t.length;if("number"==typeof a)for(i&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t);else ui(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function rn(t,e,n,r){var i=arguments.length<3;return e=d.createCallback(e,r,4),Ge(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function on(t,e,n){return e=d.createCallback(e,n,3),$e(t,function(t,n,r){return!e(t,n,r)})}function an(t,e,n){if(t&&"number"!=typeof t.length&&(t=We(t)),null==e||n)return t?t[re(0,t.length-1)]:p;var r=sn(t);return r.length=Ur(Yr(0,e),r.length),r}function sn(t){var e=-1,n=t?t.length:0,r=dr("number"==typeof n?n:0);return Ke(t,function(t){var n=re(0,++e);r[e]=r[n],r[n]=t}),r}function un(t){var e=t?t.length:0;return"number"==typeof e?e:ti(t).length}function ln(t,e,n){var r;e=d.createCallback(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&!(r=e(t[i],i,t)););else ui(t,function(t,n,i){return!(r=e(t,n,i))});return!!r}function cn(t,e,n){var r=-1,o=Jr(e),a=t?t.length:0,f=dr("number"==typeof a?a:0);for(o||(e=d.createCallback(e,n,3)),Ke(t,function(t,n,i){var a=f[++r]=u();o?a.criteria=Qe(e,function(e){return t[e]}):(a.criteria=s())[0]=e(t,n,i),a.index=r,a.value=t}),a=f.length,f.sort(i);a--;){var h=f[a];f[a]=h.value,o||l(h.criteria),c(h)}return f}function fn(t){return t&&"number"==typeof t.length?f(t):We(t)}function hn(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function pn(t){return J(t,te(arguments,!0,!0,1))}function dn(t,e,n){var r=-1,i=t?t.length:0;for(e=d.createCallback(e,n,3);++r<i;)if(e(t[r],r,t))return r;return-1}function mn(t,e,n){var r=t?t.length:0;for(e=d.createCallback(e,n,3);r--;)if(e(t[r],r,t))return r;return-1}function vn(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=d.createCallback(e,n,3);++o<i&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[0]:p;return f(t,0,Ur(Yr(0,r),i))}function gn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=Qe(t,n,r)),te(t,e)}function yn(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Yr(0,i+r):r||0}else if(r){var o=Hn(e,n);return e[o]===n?o:-1}return t(e,n,r)}function bn(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=d.createCallback(e,n,3);o--&&e(t[o],o,t);)r++}else r=null==e||n?1:e||r;return f(t,0,Ur(Yr(0,i-r),i))}function En(){for(var n=[],r=-1,i=arguments.length,a=s(),u=ue(),f=u===t,h=s();++r<i;){var p=arguments[r];(Jr(p)||he(p))&&(n.push(p),a.push(f&&p.length>=y&&o(r?n[r]:h)))}var d=n[0],m=-1,v=d?d.length:0,g=[];t:for(;++m<v;){var b=a[0];if(p=d[m],(b?e(b,p):u(h,p))<0){for(r=i,(b||h).push(p);--r;)if(b=a[r],(b?e(b,p):u(n[r],p))<0)continue t;g.push(p)}}for(;i--;)b=a[i],b&&c(b);return l(a),l(h),g}function _n(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=d.createCallback(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:p;return f(t,Yr(0,i-r))}function wn(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Yr(0,r+n):Ur(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function Tn(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var o=-1,a=e[n];++o<i;)t[o]===a&&(Ar.call(t,o--,1),i--);return t}function Rn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Yr(0,jr((e-t)/(n||1))),o=dr(i);++r<i;)o[r]=t,t+=n;return o}function kn(t,e,n){var r=-1,i=t?t.length:0,o=[];for(e=d.createCallback(e,n,3);++r<i;){var a=t[r];e(a,r,t)&&(o.push(a),Ar.call(t,r--,1),i--)}return o}function xn(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,o=t?t.length:0;for(e=d.createCallback(e,n,3);++i<o&&e(t[i],i,t);)r++}else r=null==e||n?1:Yr(0,e);return f(t,r)}function Hn(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?d.createCallback(n,r,1):Jn,e=n(e);o>i;){var a=i+o>>>1;n(t[a])<e?i=a+1:o=a}return i}function Mn(){return ie(te(arguments,!0,!0))}function jn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=d.createCallback(n,r,3)),ie(t,e,n)}function Cn(t){return J(t,f(arguments,1))}function Bn(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Jr(n)||he(n))var r=r?ie(J(r,n).concat(J(n,r))):n}return r||[]}function Pn(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?tn(pi(t,"length")):0,r=dr(0>n?0:n);++e<n;)r[e]=pi(t,e);return r}function On(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Jr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Sn(t,e){if(!je(e))throw new Tr;return function(){return--t<1?e.apply(this,arguments):void 0}}function Ln(t,e){return arguments.length>2?ae(t,17,f(arguments,2),null,e):ae(t,1,null,null,e)}function zn(t){for(var e=arguments.length>1?te(arguments,!0,!1,1):Ee(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=ae(t[i],1,null,null,t)}return t}function An(t,e){return arguments.length>2?ae(e,19,f(arguments,2),null,t):ae(e,3,null,null,t)}function Dn(){for(var t=arguments,e=t.length;e--;)if(!je(t[e]))throw new Tr;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Fn(t,e){return e="number"==typeof e?e:+e||t.length,ae(t,4,null,null,null,e)}function In(t,e,n){var r,i,o,a,s,u,l,c=0,f=!1,h=!0;if(!je(t))throw new Tr;if(e=Yr(0,e)||0,n===!0){var d=!0;h=!1}else Ce(n)&&(d=n.leading,f="maxWait"in n&&(Yr(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var m=function(){var n=e-(mi()-a);if(0>=n){i&&Cr(i);var f=l;i=u=l=p,f&&(c=mi(),o=t.apply(s,r),u||i||(r=s=null))}else u=zr(m,n)},v=function(){u&&Cr(u),i=u=l=p,(h||f!==e)&&(c=mi(),o=t.apply(s,r),u||i||(r=s=null))};return function(){if(r=arguments,a=mi(),s=this,l=h&&(u||!d),f===!1)var n=d&&!u;else{i||d||(c=a);var p=f-(a-c),g=0>=p;g?(i&&(i=Cr(i)),c=a,o=t.apply(s,r)):i||(i=zr(v,p))}return g&&u?u=Cr(u):u||e===f||(u=zr(m,e)),n&&(g=!0,o=t.apply(s,r)),!g||u||i||(r=s=null),o}}function Nn(t){if(!je(t))throw new Tr;var e=f(arguments,1);return zr(function(){t.apply(p,e)},1)}function Vn(t,e){if(!je(t))throw new Tr;var n=f(arguments,2);return zr(function(){t.apply(p,n)},e)}function Wn(t,e){if(!je(t))throw new Tr;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):g+arguments[0];return Sr.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function Xn(t){var e,n;if(!je(t))throw new Tr;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Yn(t){return ae(t,16,f(arguments,1))}function Un(t){return ae(t,32,null,f(arguments,1))}function $n(t,e,n){var r=!0,i=!0;if(!je(t))throw new Tr;return n===!1?r=!1:Ce(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),X.leading=r,X.maxWait=e,X.trailing=i,In(t,e,X)}function Zn(t,e){return ae(e,16,[t])}function qn(t){return function(){return t}}function Kn(t,e,n){var r=typeof t;if(null==t||"function"==r)return K(t,e,n);if("object"!=r)return nr(t);var i=ti(t),o=i[0],a=t[o];return 1!=i.length||a!==a||Ce(a)?function(e){for(var n=i.length,r=!1;n--&&(r=ee(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function Gn(t){return null==t?"":wr(t).replace(ii,se)}function Jn(t){return t}function Qn(t,e,n){var r=!0,i=e&&Ee(e);e&&(n||i.length)||(null==n&&(n=e),o=m,e=t,t=d,i=Ee(e)),n===!1?r=!1:Ce(n)&&"chain"in n&&(r=n.chain);var o=t,a=je(o);Ke(i,function(n){var i=t[n]=e[n];a&&(o.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,a=[n];Lr.apply(a,arguments);var s=i.apply(t,a);if(r||e){if(n===s&&Ce(s))return this;s=new o(s),s.__chain__=e}return s})})}function tr(){return n._=xr,this}function er(){}function nr(t){return function(e){return e[t]}}function rr(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Zr();return Ur(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return re(t,e)}function ir(t,e){if(t){var n=t[e];return je(n)?t[e]():n}}function or(t,e,n){var r=d.templateSettings;t=wr(t||""),n=ai({},n,r);var i,o=ai({},n.imports,r.imports),s=ti(o),u=We(o),l=0,c=n.interpolate||j,f="__p += '",h=_r((n.escape||j).source+"|"+c.source+"|"+(c===H?R:j).source+"|"+(n.evaluate||j).source+"|$","g");t.replace(h,function(e,n,r,o,s,u){return r||(r=o),f+=t.slice(l,u).replace(B,a),n&&(f+="' +\n__e("+n+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var m=n.variable,v=m;v||(m="obj",f="with ("+m+") {\n"+f+"\n}\n"),f=(i?f.replace(_,""):f).replace(w,"$1").replace(T,"$1;"),f="function("+m+") {\n"+(v?"":m+" || ("+m+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+O++ +"]")+"\n*/";try{var y=gr(s,"return "+f+g).apply(p,u)}catch(b){throw b.source=f,b}return e?y(e):(y.source=f,y)}function ar(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=dr(t);for(e=K(e,n,1);++r<t;)i[r]=e(r);return i}function sr(t){return null==t?"":wr(t).replace(ri,fe)}function ur(t){var e=++v;return wr(null==t?"":t)+e}function lr(t){return t=new m(t),t.__chain__=!0,t}function cr(t,e){return e(t),t}function fr(){return this.__chain__=!0,this}function hr(){return wr(this.__wrapped__)}function pr(){return this.__wrapped__}n=n?Q.defaults(Z.Object(),n,Q.pick(Z,P)):Z;var dr=n.Array,mr=n.Boolean,vr=n.Date,gr=n.Function,yr=n.Math,br=n.Number,Er=n.Object,_r=n.RegExp,wr=n.String,Tr=n.TypeError,Rr=[],kr=Er.prototype,xr=n._,Hr=kr.toString,Mr=_r("^"+wr(Hr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),jr=yr.ceil,Cr=n.clearTimeout,Br=yr.floor,Pr=gr.prototype.toString,Or=le(Or=Er.getPrototypeOf)&&Or,Sr=kr.hasOwnProperty,Lr=Rr.push,zr=n.setTimeout,Ar=Rr.splice,Dr=Rr.unshift,Fr=function(){try{var t={},e=le(e=Er.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Ir=le(Ir=Er.create)&&Ir,Nr=le(Nr=dr.isArray)&&Nr,Vr=n.isFinite,Wr=n.isNaN,Xr=le(Xr=Er.keys)&&Xr,Yr=yr.max,Ur=yr.min,$r=n.parseInt,Zr=yr.random,qr={};qr[L]=dr,qr[z]=mr,qr[A]=vr,qr[D]=gr,qr[I]=Er,qr[F]=br,qr[N]=_r,qr[V]=wr,m.prototype=d.prototype;var Kr=d.support={};Kr.funcDecomp=!le(n.WinRTError)&&C.test(h),Kr.funcNames="string"==typeof gr.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:H,variable:"",imports:{_:d}},Ir||(q=function(){function t(){}return function(e){if(Ce(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}());var Gr=Fr?function(t,e){Y.value=e,Fr(t,"__bindData__",Y)}:er,Jr=Nr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Hr.call(t)==L||!1},Qr=function(t){var e,n=t,r=[];if(!n)return r;if(!U[typeof t])return r;for(e in n)Sr.call(n,e)&&r.push(e);return r},ti=Xr?function(t){return Ce(t)?Xr(t):[]}:Qr,ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ni=we(ei),ri=_r("("+ti(ni).join("|")+")","g"),ii=_r("["+ti(ei).join("")+"]","g"),oi=function(t,e,n){var r,i=t,o=i;if(!i)return o;var a=arguments,s=0,u="number"==typeof n?2:a.length;if(u>3&&"function"==typeof a[u-2])var l=K(a[--u-1],a[u--],2);else u>2&&"function"==typeof a[u-1]&&(l=a[--u]);for(;++s<u;)if(i=a[s],i&&U[typeof i])for(var c=-1,f=U[typeof i]&&ti(i),h=f?f.length:0;++c<h;)r=f[c],o[r]=l?l(o[r],i[r]):i[r];return o},ai=function(t,e,n){var r,i=t,o=i;if(!i)return o;for(var a=arguments,s=0,u="number"==typeof n?2:a.length;++s<u;)if(i=a[s],i&&U[typeof i])for(var l=-1,c=U[typeof i]&&ti(i),f=c?c.length:0;++l<f;)r=c[l],"undefined"==typeof o[r]&&(o[r]=i[r]);return o},si=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!U[typeof i])return o;e=e&&"undefined"==typeof n?e:K(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return o;return o},ui=function(t,e,n){var r,i=t,o=i;if(!i)return o;if(!U[typeof i])return o;e=e&&"undefined"==typeof n?e:K(e,n,3);for(var a=-1,s=U[typeof i]&&ti(i),u=s?s.length:0;++a<u;)if(r=s[a],e(i[r],r,t)===!1)return o;return o},li=Or?function(t){if(!t||Hr.call(t)!=I)return!1;var e=t.valueOf,n=le(e)&&(n=Or(e))&&Or(n);return n?t==n||Or(t)==n:ce(t)}:ce,ci=oe(function(t,e,n){Sr.call(t,n)?t[n]++:t[n]=1}),fi=oe(function(t,e,n){(Sr.call(t,n)?t[n]:t[n]=[]).push(e)}),hi=oe(function(t,e,n){t[n]=e}),pi=Qe,di=$e,mi=le(mi=vr.now)&&mi||function(){return(new vr).getTime()},vi=8==$r(E+"08")?$r:function(t,e){return $r(Le(t)?t.replace(M,""):t,e||0)};return d.after=Sn,d.assign=oi,d.at=Xe,d.bind=Ln,d.bindAll=zn,d.bindKey=An,d.chain=lr,d.compact=hn,d.compose=Dn,d.constant=qn,d.countBy=ci,d.create=me,d.createCallback=Kn,d.curry=Fn,d.debounce=In,d.defaults=ai,d.defer=Nn,d.delay=Vn,d.difference=pn,d.filter=$e,d.flatten=gn,d.forEach=Ke,d.forEachRight=Ge,d.forIn=si,d.forInRight=ye,d.forOwn=ui,d.forOwnRight=be,d.functions=Ee,d.groupBy=fi,d.indexBy=hi,d.initial=bn,d.intersection=En,d.invert=we,d.invoke=Je,d.keys=ti,d.map=Qe,d.mapValues=Ae,d.max=tn,d.memoize=Wn,d.merge=De,d.min=en,d.omit=Fe,d.once=Xn,d.pairs=Ie,d.partial=Yn,d.partialRight=Un,d.pick=Ne,d.pluck=pi,d.property=nr,d.pull=Tn,d.range=Rn,d.reject=on,d.remove=kn,d.rest=xn,d.shuffle=sn,d.sortBy=cn,d.tap=cr,d.throttle=$n,d.times=ar,d.toArray=fn,d.transform=Ve,d.union=Mn,d.uniq=jn,d.values=We,d.where=di,d.without=Cn,d.wrap=Zn,d.xor=Bn,d.zip=Pn,d.zipObject=On,d.collect=Qe,d.drop=xn,d.each=Ke,d.eachRight=Ge,d.extend=oi,d.methods=Ee,d.object=On,d.select=$e,d.tail=xn,d.unique=jn,d.unzip=Pn,Qn(d),d.clone=pe,d.cloneDeep=de,d.contains=Ye,d.escape=Gn,d.every=Ue,d.find=Ze,d.findIndex=dn,d.findKey=ve,d.findLast=qe,d.findLastIndex=mn,d.findLastKey=ge,d.has=_e,d.identity=Jn,d.indexOf=yn,d.isArguments=he,d.isArray=Jr,d.isBoolean=Te,d.isDate=Re,d.isElement=ke,d.isEmpty=xe,d.isEqual=He,d.isFinite=Me,d.isFunction=je,d.isNaN=Be,d.isNull=Pe,d.isNumber=Oe,d.isObject=Ce,d.isPlainObject=li,d.isRegExp=Se,d.isString=Le,d.isUndefined=ze,d.lastIndexOf=wn,d.mixin=Qn,d.noConflict=tr,d.noop=er,d.now=mi,d.parseInt=vi,d.random=rr,d.reduce=nn,d.reduceRight=rn,d.result=ir,d.runInContext=h,d.size=un,d.some=ln,d.sortedIndex=Hn,d.template=or,d.unescape=sr,d.uniqueId=ur,d.all=Ue,d.any=ln,d.detect=Ze,d.findWhere=Ze,d.foldl=nn,d.foldr=rn,d.include=Ye,d.inject=nn,Qn(function(){var t={};return ui(d,function(e,n){d.prototype[n]||(t[n]=e)}),t}(),!1),d.first=vn,d.last=_n,d.sample=an,d.take=vn,d.head=vn,ui(d,function(t,e){var n="sample"!==e;d.prototype[e]||(d.prototype[e]=function(e,r){var i=this.__chain__,o=t(this.__wrapped__,e,r);return i||null!=e&&(!r||n&&"function"==typeof e)?new m(o,i):o})}),d.VERSION="2.4.1",d.prototype.chain=fr,d.prototype.toString=hr,d.prototype.value=pr,d.prototype.valueOf=pr,Ke(["join","pop","shift"],function(t){var e=Rr[t];d.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new m(n,t):n}}),Ke(["push","reverse","sort","unshift"],function(t){var e=Rr[t];d.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Ke(["concat","slice","splice"],function(t){var e=Rr[t];d.prototype[t]=function(){return new m(e.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var p,d=[],m=[],v=0,g=+new Date+"",y=75,b=40,E=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",_=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,k=/\w*$/,x=/^\s*function[ \n\r\t]+\w/,H=/<%=([\s\S]+?)%>/g,M=RegExp("^["+E+"]*0+(?=.$)"),j=/($^)/,C=/\bthis\b/,B=/['\n\r\t\u2028\u2029\\]/g,P=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],O=0,S="[object Arguments]",L="[object Array]",z="[object Boolean]",A="[object Date]",D="[object Function]",F="[object Number]",I="[object Object]",N="[object RegExp]",V="[object String]",W={};W[D]=!1,W[S]=W[L]=W[z]=W[A]=W[F]=W[I]=W[N]=W[V]=!0;var X={leading:!1,maxWait:0,trailing:!1},Y={configurable:!1,enumerable:!1,value:null,writable:!1},U={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},$={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=U[typeof window]&&window||this,q=U[typeof exports]&&exports&&!exports.nodeType&&exports,K=U[typeof module]&&module&&!module.nodeType&&module,G=K&&K.exports===q&&q,J=U[typeof global]&&global;!J||J.global!==J&&J.window!==J||(Z=J);var Q=h();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=Q,define(function(){return Q})):q&&K?G?(K.exports=Q)._=Q:q._=Q:Z._=Q}).call(this),THREE.Binder={bind:function(t,e){return function(n,r){r.__binds||(r.__binds=[]);var i=t;_.isArray(n)&&(i=n[0],n=n[1]);for(var o=/^([^.:]*(?:\.[^.:]+)*)?(?:\:(.*))?$/.exec(n),a=o[1].split(/\./g),s=a.pop(),u=o[2]||s,l=a.shift(),c={"this":r}[l]||e[l]||t[l]||i;c&&(n=a.shift());)c=c[n];if(c&&(c.on||c.addEventListener)){var f=function(e){r[u]&&r[u](e,t)};THREE.Binder._polyfill(c,["addEventListener","on"],function(t){c[t](s,f)});var h={target:c,name:s,callback:f};return r.__binds.push(h),f}throw"Cannot bind '"+n+"' in "+this.__name}},unbind:function(){return function(t){t.__binds&&(t.__binds.forEach(function(t){THREE.Binder._polyfill(t.target,["removeEventListener","off"],function(e){t.target[e](t.name,t.callback)})}.bind(this)),t.__binds=[])}},apply:function(t){THREE.EventDispatcher.prototype.apply(t),t.trigger=THREE.Binder._trigger,t.triggerOnce=THREE.Binder._triggerOnce,t.on=t.addEventListener,t.off=t.removeEventListener,t.dispatchEvent=t.trigger},_triggerOnce:function(t){this.trigger(t),this._listeners&&delete this._listeners[t.type]},_trigger:function(t){if(void 0!==this._listeners){var e=t.type,n=this._listeners[e];if(void 0!==n){n=n.slice();var r=n.length;t.target=this;for(var i=0;r>i;i++)n[i].call(this,t,this)}}},_polyfill:function(t,e,n){e.map(function(){return t.method}),e.length&&n(e[0])}},THREE.Api={apply:function(t){t.set=function(t){var e=this.options||{},n=_.reduce(t,function(t,n,r){return e[r]!==n&&(t[r]=n),t},{});this.options=_.extend(e,n),this.trigger({type:"change",options:t,changes:n})},t.get=function(){return this.options},t.api=function(t,e){return t=t||{},e&&_.each(t,function(t,n,r){_.isFunction(t)&&(r[n]=_.partialRight(t,e))}),t.set=this.set.bind(this),t.get=this.get.bind(this),t}}},THREE.Bootstrap=function(t){if(t&&_.isString(t)&&(t=[].slice.apply(arguments)),_.isArray(t)&&(t={plugins:t}),!(this instanceof THREE.Bootstrap))return new THREE.Bootstrap(t);var e={init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:THREE.Bootstrap.Plugins||{},aliasdb:THREE.Bootstrap.Aliases||{}};this.__options=_.defaults(t||{},e),this.__inited=!1,this.__destroyed=!1,this.__installed=[],this.plugins={},this.element=this.__options.element,this.__options.init&&this.init()},THREE.Bootstrap.prototype={init:function(){return this.__inited?void 0:(this.__inited=!0,this.install(this.__options.plugins),this)},destroy:function(){return this.__inited&&!this.__destroyed?(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall(),this):void 0},resolve:function(t){function e(t,n,i){if(i>=256)throw"Plug-in alias recursion detected.";return _.each(t,function(t){var o=r[t];o?n=n.concat(e(o,[],i+1)):n.push(t)}),n}t=_.isArray(t)?t:[t];var n=this.__options,r=_.extend({},n.aliasdb,n.aliases);return t=_.filter(t,function(t){var e=t.split(":");return e[1]?(r[e[0]]=e[1],!1):!0}),_.each(r,function(t,e){r[e]=_.isArray(t)?t:[t]}),e(t,[],0)},install:function(t){t=_.isArray(t)?t:[t],t=this.resolve(t),_.each(t,this.__install,this),this.__ready()},uninstall:function(t){t&&(t=_.isArray(t)?t:[t],t=this.resolve(t)),_.eachRight(t||this.__installed,this.__uninstall,this)},__install:function(t){var e=this.__options.plugindb[t];if(!e)throw"[three.install] Cannot install. '"+t+"' is not registered.";if(this.plugins[t])return console.warn("[three.install] "+t+" is already installed.");var n=e,r=new n(this.__options[t]||{},t);this.plugins[t]=r,r.install(this),this.__installed.push(r),this.trigger({type:"install",plugin:r})
},__uninstall:function(t){return(plugin=_.isString(t)?this.plugins[t]:t)?(t=plugin.__name,plugin.uninstall(this),this.__installed=_.without(this.__installed,plugin),delete this.plugins[t],void this.trigger({type:"uninstall",plugin:plugin})):console.warn("[three.uninstall] "+t+"' is not installed.")},__ready:function(){this.triggerOnce({type:"ready"})}},THREE.Binder.apply(THREE.Bootstrap.prototype),THREE.Bootstrap.Plugins={},THREE.Bootstrap.Aliases={},THREE.Bootstrap.Plugin=function(t){this.options=_.defaults(t||{},this.defaults)},THREE.Bootstrap.Plugin.prototype={listen:[],defaults:{},install:function(){},uninstall:function(){}},THREE.Binder.apply(THREE.Bootstrap.Plugin.prototype),THREE.Api.apply(THREE.Bootstrap.Plugin.prototype),THREE.Bootstrap.registerPlugin=function(t,e){var n=function(e){THREE.Bootstrap.Plugin.call(this,e),this.__name=t};n.prototype=_.extend(new THREE.Bootstrap.Plugin,e),THREE.Bootstrap.Plugins[t]=n},THREE.Bootstrap.unregisterPlugin=function(t){delete THREE.Bootstrap.Plugins[t]},THREE.Bootstrap.registerAlias=function(t,e){THREE.Bootstrap.Aliases[t]=e},THREE.Bootstrap.unregisterAlias=function(t){delete THREE.Bootstrap.Aliases[t]},THREE.Bootstrap.registerAlias("empty",["renderer","bind","size","fill","loop","time"]),THREE.Bootstrap.registerAlias("core",["empty","scene","camera","render"]),THREE.Bootstrap.registerPlugin("renderer",{defaults:{klass:THREE.WebGLRenderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},install:function(t){var e=t.renderer=new this.options.klass(this.options.parameters);t.canvas=e.domElement,t.element.appendChild(e.domElement)},uninstall:function(t){t.element.removeChild(t.renderer.domElement),delete t.renderer,delete t.canvas}}),THREE.Bootstrap.registerPlugin("bind",{install:function(t){var e={three:t,window:window};t.bind=THREE.Binder.bind(t,e),t.unbind=THREE.Binder.unbind(t),t.bind("install:bind",this),t.bind("uninstall:unbind",this)},uninstall:function(t){t.unbind(this),delete t.bind,delete t.unbind},bind:function(t,e){var n=t.plugin,r=n.listen;r&&r.forEach(function(t){e.bind(t,n)})},unbind:function(t,e){e.unbind(t.plugin)}}),THREE.Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,capWidth:1/0,capHeight:1/0},listen:["window.resize","element.resize","this.change:resize","ready:resize"],install:function(t){t.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0})},uninstall:function(t){delete t.Size},resize:function(t,e){var n,r,i,o,a,s,u,l,c=this.options,f=e.element,h=e.renderer,p=0,d=0;n=i=void 0===c.width||null==c.width?f.offsetWidth||f.innerWidth||0:c.width,r=o=void 0===c.height||null==c.height?f.offsetHeight||f.innerHeight||0:c.height,u=n/r,c.aspect&&(c.aspect>u?(r=Math.round(n/c.aspect),d=Math.floor((o-r)/2)):(n=Math.round(r*c.aspect),p=Math.floor((i-n)/2)),u=n/r),a=Math.min(n*c.scale,c.capWidth),s=Math.min(r*c.scale,c.capHeight),raspect=a/s,raspect>u?a=Math.round(s*u):s=Math.round(a/u),h.setSize(a,s),l=h.domElement.style,l.width=n+"px",l.height=r+"px",l.marginLeft=p+"px",l.marginTop=d+"px",_.extend(e.Size,{renderWidth:a,renderHeight:s,viewWidth:n,viewHeight:r,aspect:u}),e.trigger({type:"resize",renderWidth:a,renderHeight:s,viewWidth:n,viewHeight:r,aspect:u})}}),THREE.Bootstrap.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(t){function e(t){var e=t.style.height;return"auto"==e||""==e}function n(t){return t.style.height="100%",t.style.margin=0,t.style.padding=0,t}if(this.options.body&&t.element==document.body&&(this.applied=[t.element,document.documentElement].filter(e).map(n)),this.options.block&&t.canvas&&(t.canvas.style.display="block",this.block=!0),this.options.layout&&t.element){var r=window.getComputedStyle(t.element);"static"==r.position&&(t.element.style.position="relative",this.layout=!0)}},uninstall:function(t){function e(t){return t.style.height="",t.style.margin="",t.style.padding="",t}this.applied&&(this.applied.map(e),delete this.applied),this.block&&t.canvas&&(t.canvas.style.display="",delete this.block),this.layout&&t.element&&(t.element.style.position="",delete this.layout)},change:function(t){this.uninstall(t),this.install(t)}}),THREE.Bootstrap.registerPlugin("loop",{defaults:{start:!0},listen:["ready"],install:function(t){this.running=!1,t.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1},t),this.events=["pre","update","render","post"].map(function(t){return{type:t}})},uninstall:function(t){this.stop(t)},ready:function(t,e){this.options.start&&this.start(e)},start:function(t){if(!this.running){t.Loop.running=this.running=!0;var e=t.trigger.bind(t),n=function(){this.running&&requestAnimationFrame(n),this.events.map(e)}.bind(this);requestAnimationFrame(n),t.trigger({type:"start"})}},stop:function(t){this.running&&(t.Loop.running=this.running=!1,t.trigger({type:"stop"}))}}),THREE.Bootstrap.registerPlugin("time",{defaults:{speed:1},listen:["pre:tick","this.change"],install:function(t){t.Time=this.api({now:0,clock:0,step:1/60,frames:0,delta:1/60,average:0,fps:0}),this.last=0,this.clock=0},tick:function(t,e){var n=this.options.speed,r=e.Time,i=r.now=+new Date/1e3,o=this.last,a=this.clock;if(o){var s=r.delta=i-o,u=r.average||s;r.average=u+.1*(s-u),r.fps=1/u;var l=s*n;a+=l,r.step=l,r.clock=a,r.frames++}this.last=i,this.clock=a},uninstall:function(t){delete t.Time}}),THREE.Bootstrap.registerPlugin("scene",{install:function(t){t.scene=new THREE.Scene},uninstall:function(t){delete t.scene}}),THREE.Bootstrap.registerPlugin("camera",{defaults:{near:.1,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(t){t.Camera=this.api(),t.camera=null,this.aspect=1,this.change({},t)},uninstall:function(t){delete t.Camera,delete t.camera},change:function(t,e){var n=this.options,r=e.camera;if(!e.camera||t.changes.type||t.changes.klass){var i=n.klass||{perspective:THREE.PerspectiveCamera,orthographic:THREE.OrthographicCamera}[n.type]||THREE.Camera;e.camera=n.parameters?new i(n.parameters):new i}_.each(n,function(t,r){e.camera.hasOwnProperty(r)&&(e.camera[r]=n[r])}.bind(this)),this.update(e),r===e.camera||e.trigger({type:"camera",camera:e.camera})},resize:function(t,e){this.aspect=t.viewWidth/Math.max(1,t.viewHeight),this.update(e)},update:function(t){t.camera.aspect=this.options.aspect||this.aspect,t.camera.updateProjectionMatrix()}}),THREE.Bootstrap.registerPlugin("render",{listen:["render"],render:function(t,e){e.scene&&e.camera&&e.renderer.render(e.scene,e.camera)}}),THREE.Stats=function(){var t=Date.now(),e=t,n=0,r=1/0,i=0,o=0,a=1/0,s=0,u=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),y(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var f=document.createElement("div");f.id="fps",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(f);var h=document.createElement("div");h.id="fpsText",h.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",h.innerHTML="FPS",f.appendChild(h);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",f.appendChild(p);74>p.children.length;){var d=document.createElement("span");d.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(d)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;)d=document.createElement("span"),d.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(d);var y=function(t){switch(l=t){case 0:f.style.display="block",m.style.display="none";break;case 1:f.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:c,setMode:y,begin:function(){t=Date.now()},end:function(){var l=Date.now();n=l-t,r=Math.min(r,n),i=Math.max(i,n),v.textContent=n+" MS ("+r+"-"+i+")";var c=Math.min(30,30-30*(n/200));return g.appendChild(g.firstChild).style.height=c+"px",u++,l>e+1e3&&(o=Math.round(1e3*u/(l-e)),a=Math.min(a,o),s=Math.max(s,o),h.textContent=o+" FPS ("+a+"-"+s+")",c=Math.min(30,30-30*(o/100)),p.appendChild(p.firstChild).style.height=c+"px",e=l,u=0),l},update:function(){t=this.end()}}},THREE.FirstPersonControls=function(t,e){function n(t,e){return function(){e.apply(t,arguments)}}this.object=t,this.target=new THREE.Vector3(0,0,0),this.domElement=void 0!==e?e:document,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.lat=0,this.lon=0,this.phi=0,this.theta=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.freeze=!1,this.mouseDragOn=!1,this.viewHalfX=0,this.viewHalfY=0,this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(t){if(this.domElement!==document&&this.domElement.focus(),t.preventDefault(),t.stopPropagation(),this.activeLook)switch(t.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onMouseUp=function(t){if(t.preventDefault(),t.stopPropagation(),this.activeLook)switch(t.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onMouseMove=function(t){this.domElement===document?(this.mouseX=t.pageX-this.viewHalfX,this.mouseY=t.pageY-this.viewHalfY):(this.mouseX=t.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=t.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(t){switch(t.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0;break;case 81:this.freeze=!this.freeze}},this.onKeyUp=function(t){switch(t.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:this.moveUp=!1;break;case 70:this.moveDown=!1}},this.update=function(t){if(!this.freeze){if(this.heightSpeed){var e=THREE.Math.clamp(this.object.position.y,this.heightMin,this.heightMax),n=e-this.heightMin;this.autoSpeedFactor=t*n*this.heightCoef}else this.autoSpeedFactor=0;var r=t*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);var i=t*this.lookSpeed;this.activeLook||(i=0);var o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon+=this.mouseX*i,this.lookVertical&&(this.lat-=this.mouseY*i*o),this.lat=Math.max(-85,Math.min(85,this.lat)),this.phi=THREE.Math.degToRad(90-this.lat),this.theta=THREE.Math.degToRad(this.lon),this.constrainVertical&&(this.phi=THREE.Math.mapLinear(this.phi,0,Math.PI,this.verticalMin,this.verticalMax));var a=this.target,s=this.object.position;a.x=s.x+100*Math.sin(this.phi)*Math.cos(this.theta),a.y=s.y+100*Math.cos(this.phi),a.z=s.z+100*Math.sin(this.phi)*Math.sin(this.theta),this.object.lookAt(a)}},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousemove",n(this,this.onMouseMove),!1),this.domElement.addEventListener("mousedown",n(this,this.onMouseDown),!1),this.domElement.addEventListener("mouseup",n(this,this.onMouseUp),!1),this.domElement.addEventListener("keydown",n(this,this.onKeyDown),!1),this.domElement.addEventListener("keyup",n(this,this.onKeyUp),!1),this.handleResize()},THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*l.autoRotateSpeed}function r(){return Math.pow(.95,l.userZoomSpeed)}function i(t){l.enabled!==!1&&l.userRotate!==!1&&(t.preventDefault(),0===t.button?(T=w.ROTATE,h.set(t.clientX,t.clientY)):1===t.button?(T=w.ZOOM,m.set(t.clientX,t.clientY)):2===t.button&&(T=w.PAN),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",a,!1))}function o(t){if(l.enabled!==!1)if(t.preventDefault(),T===w.ROTATE)p.set(t.clientX,t.clientY),d.subVectors(p,h),l.rotateLeft(2*Math.PI*d.x/f*l.userRotateSpeed),l.rotateUp(2*Math.PI*d.y/f*l.userRotateSpeed),h.copy(p);else if(T===w.ZOOM)v.set(t.clientX,t.clientY),g.subVectors(v,m),g.y>0?l.zoomIn():l.zoomOut(),m.copy(v);else if(T===w.PAN){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;l.pan(new THREE.Vector3(-e,n,0))}}function a(){l.enabled!==!1&&l.userRotate!==!1&&(document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",a,!1),T=w.NONE)}function s(t){if(l.enabled!==!1&&l.userZoom!==!1){var e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e>0?l.zoomOut():l.zoomIn()}}function u(t){if(l.enabled!==!1&&l.userPan!==!1)switch(t.keyCode){case l.keys.UP:l.pan(new THREE.Vector3(0,1,0));break;case l.keys.BOTTOM:l.pan(new THREE.Vector3(0,-1,0));break;case l.keys.LEFT:l.pan(new THREE.Vector3(-1,0,0));break;case l.keys.RIGHT:l.pan(new THREE.Vector3(1,0,0))}}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.center=new THREE.Vector3,this.userZoom=!0,this.userZoomSpeed=1,this.userRotate=!0,this.userRotateSpeed=1,this.userPan=!0,this.userPanSpeed=2,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minDistance=0,this.maxDistance=1/0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var l=this,c=1e-6,f=1800,h=new THREE.Vector2,p=new THREE.Vector2,d=new THREE.Vector2,m=new THREE.Vector2,v=new THREE.Vector2,g=new THREE.Vector2,y=0,b=0,E=1,_=new THREE.Vector3,w={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},T=w.NONE,R={type:"change"};this.rotateLeft=function(t){void 0===t&&(t=n()),b-=t},this.rotateRight=function(t){void 0===t&&(t=n()),b+=t},this.rotateUp=function(t){void 0===t&&(t=n()),y-=t},this.rotateDown=function(t){void 0===t&&(t=n()),y+=t},this.zoomIn=function(t){void 0===t&&(t=r()),E/=t},this.zoomOut=function(t){void 0===t&&(t=r()),E*=t},this.pan=function(t){t.transformDirection(this.object.matrix),t.multiplyScalar(l.userPanSpeed),this.object.position.add(t),this.center.add(t)},this.update=function(){var t=this.object.position,e=t.clone().sub(this.center),r=Math.atan2(e.x,e.z),i=Math.atan2(Math.sqrt(e.x*e.x+e.z*e.z),e.y);this.autoRotate&&this.rotateLeft(n()),r+=b,i+=y,i=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,i)),i=Math.max(c,Math.min(Math.PI-c,i));var o=e.length()*E;o=Math.max(this.minDistance,Math.min(this.maxDistance,o)),e.x=o*Math.sin(i)*Math.sin(r),e.y=o*Math.cos(i),e.z=o*Math.sin(i)*Math.cos(r),t.copy(this.center).add(e),this.object.lookAt(this.center),b=0,y=0,E=1,_.distanceTo(this.object.position)>0&&(this.dispatchEvent(R),_.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("DOMMouseScroll",s,!1),this.domElement.addEventListener("keydown",u,!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.Bootstrap.registerPlugin("stats",{listen:["pre","post"],install:function(t){var e=this.stats=new THREE.Stats,n=e.domElement.style;n.position="absolute",n.top=n.left=0,t.element.appendChild(e.domElement),t.stats=e},uninstall:function(t){document.body.removeChild(this.stats.domElement),delete t.stats},pre:function(){this.stats.begin()},post:function(){this.stats.end()}}),THREE.Bootstrap.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(t){if(!this.options.klass)throw"Must provide class for `controls.klass`";t.controls=null,this._camera=t.camera||new THREE.PerspectiveCamera,this.change(null,t)},uninstall:function(t){delete t.controls},change:function(t,e){this.options.klass?((!t||t.changes.klass)&&(e.controls=new this.options.klass(this._camera,e.renderer.domElement)),_.extend(e.controls,this.options.parameters)):e.controls=null},update:function(t,e){var n=e.Time&&e.Time.delta||1/60;e.controls.update(n)},camera:function(t,e){e.controls.object=this._camera=t.camera},resize:function(t,e){e.controls.handleResize&&e.controls.handleResize()}});