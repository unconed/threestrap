(()=>{var e={466:function(e){var t;e.exports=((t=function(){function e(e){return s.appendChild(e.dom),e}function i(e){for(var t=0;t<s.children.length;t++)s.children[t].style.display=t===e?"block":"none";n=e}var n=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",(function(e){e.preventDefault(),i(++n%s.children.length)}),!1);var r=(performance||Date).now(),o=r,a=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:s,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(c.update(e-r,200),e>o+1e3&&(l.update(1e3*a/(e-o),100),o=e,a=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:s,setMode:i}}).Panel=function(e,t,i){var n=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,u=2*o,d=3*o,h=15*o,p=74*o,f=30*o,g=document.createElement("canvas");g.width=a,g.height=l,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,a,l),m.fillStyle=t,m.fillText(e,c,u),m.fillRect(d,h,p,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(d,h,p,f),{dom:g,update:function(l,v){n=Math.min(n,l),s=Math.max(s,l),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,a,h),m.fillStyle=t,m.fillText(r(l)+" "+e+" ("+r(n)+"-"+r(s)+")",c,u),m.drawImage(g,d+o,h,p-o,f,d,h,p-o,f),m.fillRect(d+p-o,h,o,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(d+p-o,h,o,r((1-l/v)*f))}}},t)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=THREE;function t(e){return e&&"string"==typeof e.valueOf()}e.Api={apply:function(e){e.set=function(e){var t=this.options||{},i=Object.entries(e).reduce((function(e,[i,n]){return t[i]!==n&&(e[i]=n),e}),{});this.options=Object.assign(t,i),this.trigger({type:"change",options:e,changes:i})},e.get=function(){return this.options},e.api=function(e,t){return e||={},t&&Object.entries(e).forEach((function([i,n]){"function"==typeof n&&(e[i]=(...e)=>n(...e,t))})),e.set=this.set.bind(this),e.get=this.get.bind(this),e}}},e.Binder={bind:function(t,i){return function(n,s){s.__binds||(s.__binds=[]);var r=t;Array.isArray(n)&&(r=n[0],n=n[1]);for(var o=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(n),a=o[1].split(/\./g),l=a.pop(),c=o[2]||l,u=a.shift(),d={this:s}[u]||i[u]||t[u]||r;d&&(n=a.shift());)d=d[n];if(d&&(d.on||d.addEventListener)){var h=function(e){s[c]&&s[c](e,t)};e.Binder._polyfill(d,["addEventListener","on"],(function(e){d[e](l,h)}));var p={target:d,name:l,callback:h};return s.__binds.push(p),h}throw"Cannot bind '"+n+"' in "+this.__name}},unbind:function(){return function(t){t.__binds&&(t.__binds.forEach(function(t){e.Binder._polyfill(t.target,["removeEventListener","off"],(function(e){t.target[e](t.name,t.callback)}))}.bind(this)),t.__binds=[])}},apply:function(t){Object.assign(t,e.EventDispatcher.prototype),t.trigger=e.Binder._trigger,t.triggerOnce=e.Binder._triggerOnce,t.on=t.addEventListener,t.off=t.removeEventListener,t.dispatchEvent=t.trigger},_triggerOnce:function(e){this.trigger(e),this._listeners&&delete this._listeners[e.type]},_trigger:function(e){if(void 0!==this._listeners){var t=e.type,i=this._listeners[t];if(void 0!==i){var n=(i=i.slice()).length;e.target=this;for(var s=0;s<n;s++)i[s].call(this,e,this)}}},_polyfill:function(e,t,i){t.map((function(t){return e.method})),t.length&&i(t[0])}},e.Bootstrap=function(i){if(i){let e=[].slice.apply(arguments);if(i={},e[0]instanceof Node){const t=e[0];e=e.slice(1),i.element=t}t(e[0])?i.plugins=e:Array.isArray(e[0])?i.plugins=e[0]:e[0]&&(i=Object.assign({},e[0],i))}if(!(this instanceof e.Bootstrap))return new e.Bootstrap(i);const n={init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:e.Bootstrap.Plugins||{},aliasdb:e.Bootstrap.Aliases||{}};this.__options=Object.assign({},n,i||{}),this.__inited=!1,this.__destroyed=!1,this.__installed=[];var s=this.__options.element;s===""+s&&(s=document.querySelector(s)),this.plugins={},this.element=s,this.trigger=this.trigger.bind(this),this.frame=this.frame.bind(this),this.events=["pre","update","render","post"].map((function(e){return{type:e}})),this.__options.init&&this.init()},e.Bootstrap.prototype={init:function(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))},destroy:function(){this.__inited&&(this.__destroyed||(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall()))},frame:function(){this.events.map(this.trigger)},resolve:function(e){e=Array.isArray(e)?e:[e];var t=this.__options,i=Object.assign({},t.aliasdb,t.aliases),n=function(e){var t=e.split(":");return!t[1]||(i[t[0]]=[t[1]],!1)};return e=e.filter(n),Object.entries(i).forEach((function([e,t]){i[e]=Array.isArray(t)?t:[t]})),function e(t,s,r){if(r>=256)throw"Plug-in alias recursion detected.";return(t=t.filter(n)).forEach((function(t){var n=i[t];n?s=s.concat(e(n,[],r+1)):s.push(t)})),s}(e,[],0)},install:function(e){e=Array.isArray(e)?e:[e],(e=this.resolve(e)).forEach((e=>this.__install(e))),this.__ready()},uninstall:function(e){e&&(e=Array.isArray(e)?e:[e],e=this.resolve(e)),(e||this.__installed).reverse().forEach((e=>this.__uninstall(e.__name)))},__install:function(e){var t=this.__options.plugindb[e];if(!t)throw"[three.install] Cannot install. '"+e+"' is not registered.";if(this.plugins[e])return console.warn("[three.install] "+e+" is already installed.");var i=new t(this.__options[e]||{},e);this.plugins[e]=i;const n=i.install(this);return this.__installed.push(i),this.trigger({type:"install",plugin:i}),n},__uninstall:function(e){const i=t(e)?this.plugins[e]:e;if(!i)return console.warn("[three.uninstall] "+e+"' is not installed.");e=i.__name,i.uninstall(this),this.__installed=this.__installed.filter((e=>e!==i)),delete this.plugins[e],this.trigger({type:"uninstall",plugin:i})},__ready:function(){this.triggerOnce({type:"ready"})},addEventListener:e.EventDispatcher.prototype.addEventListener,hasEventListener:e.EventDispatcher.prototype.hasEventListener,removeEventListener:e.EventDispatcher.prototype.removeEventListener},e.Binder.apply(e.Bootstrap.prototype),e.Bootstrap.Plugins={},e.Bootstrap.Aliases={},e.Bootstrap.Plugin=function(t){this.options=Object.assign({},this.defaults,t||{}),this.addEventListener=e.EventDispatcher.prototype.addEventListener,this.hasEventListener=e.EventDispatcher.prototype.hasEventListener,this.removeEventListener=e.EventDispatcher.prototype.removeEventListener},e.Bootstrap.Plugin.prototype={listen:[],defaults:{},install:function(e){},uninstall:function(e){}},e.Binder.apply(e.Bootstrap.Plugin.prototype),e.Api.apply(e.Bootstrap.Plugin.prototype),e.Bootstrap.registerPlugin=function(t,i){var n=function(i){e.Bootstrap.Plugin.call(this,i),this.__name=t};n.prototype=Object.assign(new e.Bootstrap.Plugin,i),e.Bootstrap.Plugins[t]=n},e.Bootstrap.unregisterPlugin=function(t){delete e.Bootstrap.Plugins[t]},e.Bootstrap.registerAlias=function(t,i){e.Bootstrap.Aliases[t]=i},e.Bootstrap.unregisterAlias=function(t){delete e.Bootstrap.Aliases[t]},e.Bootstrap.registerAlias("empty",["fallback","bind","renderer","size","fill","loop","time"]),e.Bootstrap.registerAlias("core",["empty","scene","camera","render","warmup"]),e.Bootstrap.registerAlias("VR",["core","cursor","fullscreen","render:vr"]),e.Bootstrap.registerPlugin("bind",{install:function(t){var i={three:t,window};t.bind=e.Binder.bind(t,i),t.unbind=e.Binder.unbind(t),t.bind("install:bind",this),t.bind("uninstall:unbind",this)},uninstall:function(e){e.unbind(this),delete e.bind,delete e.unbind},bind:function(e,t){var i=e.plugin,n=i.listen;n&&n.forEach((function(e){t.bind(e,i)}))},unbind:function(e,t){t.unbind(e.plugin)}}),e.Bootstrap.registerPlugin("camera",{defaults:{near:.01,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(e){e.Camera=this.api(),e.camera=null,this.aspect=1,this.change({},e)},uninstall:function(e){delete e.Camera,delete e.camera},change:function(t,i){var n=this.options,s=i.camera;if(!i.camera||t.changes.type||t.changes.klass){var r=n.klass||{perspective:e.PerspectiveCamera,orthographic:e.OrthographicCamera}[n.type]||e.Camera;i.camera=n.parameters?new r(n.parameters):new r}Object.entries(n).forEach(function([e]){Object.prototype.hasOwnProperty.call(i.camera,e)&&(i.camera[e]=n[e])}.bind(this)),this.update(i),s===i.camera||i.trigger({type:"camera",camera:i.camera})},resize:function(e,t){this.aspect=e.viewWidth/Math.max(1,e.viewHeight),this.update(t)},update:function(e){e.camera.aspect=this.options.aspect||this.aspect,e.camera.updateProjectionMatrix()}}),e.Bootstrap.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'<div class="threestrap-fallback" style="display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"><div style="display: table-cell; padding: 10px; vertical-align: middle; text-align: center;">',end:"</div></div>",message:'<big><strong>This example requires WebGL</strong></big><br>Visit <a target="_blank" href="http://get.webgl.org/">get.webgl.org</a> for more info</a>'},install:function(e){var t;try{if(!((t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl"))||this.options.force)throw"WebGL unavailable.";e.fallback=!1}catch(t){var i=this.options.message,n=this.options.begin,s=this.options.end,r=this.options.fill,o=document.createElement("div");for(o.innerHTML=n+i+s,this.children=[];o.childNodes.length>0;)this.children.push(o.firstChild),e.element.appendChild(o.firstChild);return r&&e.install("fill"),this.div=o,e.fallback=!0,!1}},uninstall:function(e){this.children&&(this.children.forEach((function(e){e.parentNode.removeChild(e)})),this.children=null),delete e.fallback}}),e.Bootstrap.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(e){(this.options.body&&e.element==document.body&&(this.applied=[e.element,document.documentElement].filter((function(e){var t=e.style.height;return"auto"==t||""==t})).map((function(e){return e.style.height="100%",e.style.margin=0,e.style.padding=0,e}))),this.options.block&&e.canvas&&(e.canvas.style.display="block",this.block=!0),this.options.layout&&e.element)&&("static"==window.getComputedStyle(e.element).position&&(e.element.style.position="relative",this.layout=!0))},uninstall:function(e){if(this.applied){const e=function(e){return e.style.height="",e.style.margin="",e.style.padding="",e};this.applied.map(e),delete this.applied}this.block&&e.canvas&&(e.canvas.style.display="",delete this.block),this.layout&&e.element&&(e.element.style.position="",delete this.layout)},change:function(e){this.uninstall(e),this.install(e)}}),e.Bootstrap.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(e){this.running=!1,this.lastRequestId=null,e.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},e),this.events=["pre","update","render","post"].map((function(e){return{type:e}}))},uninstall:function(e){this.stop(e)},ready:function(e,t){this.options.start&&this.start(t)},start:function(e){if(!this.running){e.Loop.running=this.running=!0;var t=e.trigger.bind(e),i=function(){this.running&&(this.lastRequestId=e.Loop.window.requestAnimationFrame(i),this.events.map(t))}.bind(this);this.lastRequestId=e.Loop.window.requestAnimationFrame(i),e.trigger({type:"start"})}},stop:function(e){this.running&&(e.Loop.running=this.running=!1,e.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,e.trigger({type:"stop"}))}}),e.Bootstrap.registerPlugin("render",{listen:["render"],render:function(e,t){t.scene&&t.camera&&t.renderer.render(t.scene,t.camera)}}),e.Bootstrap.registerPlugin("renderer",{defaults:{klass:e.WebGLRenderer,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(e){var t=e.renderer=new this.options.klass(this.options.parameters);e.canvas=t.domElement,e.element.appendChild(t.domElement)},uninstall:function(e){e.element.removeChild(e.renderer.domElement),delete e.renderer,delete e.canvas},resize:function(e,t){var i=t.renderer,n=i.domElement;n&&"CANVAS"==n.tagName?i.setSize(e.renderWidth,e.renderHeight,!1):(i.setRenderSize&&i.setRenderSize(e.renderWidth,e.renderHeight),i.setSize(e.viewWidth,e.viewHeight,!1))}}),e.Bootstrap.registerPlugin("scene",{install:function(t){t.scene=new e.Scene},uninstall:function(e){delete e.scene}}),e.Bootstrap.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:1/0,maxRenderHeight:1/0,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(e){e.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.resized=!1},uninstall:function(e){delete e.Size},queue:function(e,t){this.resized=!0},pre:function(e,t){this.resized&&(this.resized=!1,this.resize(e,t))},resize:function(e,t){var i,n,s,r,o,a,l,c,u,d=this.options,h=t.element,p=t.renderer,f=0,g=0;l=(i=s=void 0===d.width||null==d.width?h.offsetWidth||h.innerWidth||0:d.width)/(n=r=void 0===d.height||null==d.height?h.offsetHeight||h.innerHeight||0:d.height),d.aspect&&(d.aspect>l?(n=Math.round(i/d.aspect),g=Math.floor((r-n)/2)):(i=Math.round(n*d.aspect),f=Math.floor((s-i)/2)),l=i/n),u=1,d.devicePixelRatio&&"undefined"!=typeof window&&(u=window.devicePixelRatio||1);(o=Math.round(Math.min(i*u*d.scale,d.maxRenderWidth)))/(a=Math.round(Math.min(n*u*d.scale,d.maxRenderHeight)))>l?o=Math.round(a*l):a=Math.round(o/l),u=a/n,(c=p.domElement.style).width=i+"px",c.height=n+"px",c.marginLeft=f+"px",c.marginTop=g+"px",Object.assign(t.Size,{renderWidth:o,renderHeight:a,viewWidth:i,viewHeight:n,aspect:l,pixelRatio:u}),t.trigger({type:"resize",renderWidth:o,renderHeight:a,viewWidth:i,viewHeight:n,aspect:l,pixelRatio:u})}}),e.Bootstrap.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1e3},install:function(e){e.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0}),this.last=0,this.time=0,this.clock=0,this.wait=this.options.warmup,this.clockStart=0,this.timeStart=0},tick:function(e,t){var i=this.options.speed,n=this.options.timeout,s=t.Time,r=s.now=this.now(),o=this.last,a=this.time,l=this.clock;if(o){var c=s.delta=r-o,u=s.average||c;c>n&&(c=0);var d=c*i;a+=c,l+=d,s.frames>0&&(s.average=u+.1*(c-u),s.fps=1/u),s.step=d,s.clock=l-this.clockStart,s.time=a-this.timeStart,s.frames++,this.wait-- >0&&(this.clockStart=l,this.timeStart=a,s.clock=0,s.step=1e-100)}this.last=r,this.clock=l,this.time=a},uninstall:function(e){delete e.Time}}),e.Bootstrap.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(e,t){t.renderer.domElement.style.visibility="hidden",this.frame=0,this.hidden=!0},post:function(e,t){this.hidden&&this.frame>=this.options.delay&&(t.renderer.domElement.style.visibility="visible",this.hidden=!1),this.frame++}}),e.Bootstrap.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(t){if(!this.options.klass)throw"Must provide class for `controls.klass`";t.controls=null,this._camera=t.camera||new e.PerspectiveCamera,this.change(null,t)},uninstall:function(e){delete e.controls},change:function(e,t){this.options.klass?(e&&!e.changes.klass||(t.controls=new this.options.klass(this._camera,t.renderer.domElement)),Object.assign(t.controls,this.options.parameters)):t.controls=null},update:function(e,t){var i=t.Time&&t.Time.delta||1/60,n=t.VR&&t.VR.state;t.controls.vr&&t.controls.vr(n),t.controls.update(i)},camera:function(e,t){t.controls.object=this._camera=e.camera},resize:function(e,t){t.controls.handleResize&&t.controls.handleResize()}}),e.Bootstrap.registerPlugin("cursor",{listen:["update","this.change","install:change","uninstall:change","element.mousemove","vr"],defaults:{cursor:null,hide:!1,timeout:3},install:function(e){this.timeout=this.options.timeout,this.element=e.element,this.change(null,e)},uninstall:function(e){delete e.controls},change:function(e,t){this.applyCursor(t)},mousemove:function(e,t){this.options.hide&&(this.applyCursor(t),this.timeout=+this.options.timeout||0)},update:function(e,t){var i=t.Time&&t.Time.delta||1/60;this.options.hide&&(this.timeout-=i,this.timeout<0&&this.applyCursor(t,"none"))},vr:function(e,t){this.hide=e.active&&!e.hmd.fake,this.applyCursor(t)},applyCursor:function(e,t){var i=e.controls?"move":"";t=t||this.options.cursor||i,this.hide&&(t="none"),this.cursor!=t&&(this.element.style.cursor=t)}}),e.Bootstrap.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(e){e.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},e)},uninstall:function(e){delete e.Fullscreen},ready:function(e,t){document.body.addEventListener("keypress",function(e){this.options.key&&e.charCode==this.options.key.charCodeAt(0)&&this.toggle(t)}.bind(this));var i=function(){var e=!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement);t.Fullscreen.active=this.active=e,t.trigger({type:"fullscreen",active:e})}.bind(this);document.addEventListener("fullscreenchange",i,!1),document.addEventListener("webkitfullscreenchange",i,!1),document.addEventListener("mozfullscreenchange",i,!1)},toggle:function(e){var t=e.canvas,i=e.VR&&e.VR.active?{vrDisplay:e.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():t.requestFullScreen?t.requestFullScreen(i):t.msRequestFullScreen?t.msRequestFullscreen(i):t.webkitRequestFullscreen?t.webkitRequestFullscreen(i):t.mozRequestFullScreen&&t.mozRequestFullScreen(i)}});var n=i(466),s=i.n(n);e.Bootstrap.registerPlugin("stats",{listen:["pre","post"],install:function(e){var t=this.stats=new(s()),i=t.domElement.style;i.position="absolute",i.top=i.left=0,e.element.appendChild(t.domElement),e.stats=t},uninstall:function(e){document.body.removeChild(this.stats.domElement),delete e.stats},pre:function(e,t){this.stats.begin()},post:function(e,t){this.stats.end()}}),e.Bootstrap.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},listen:["fullscreen"],markup:function(e,t,i){var n="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(n="http://"+n);var s=[];return e.Fullscreen&&s.push('<button class="fullscreen" title="Full Screen"><span class="glyphicon glyphicon-fullscreen"></span></button>'),e.VR&&s.push('<button class="vr" title="VR Headset">VR</button>'),'<style type="text/css">@import url("'+n+'"); '+i+'</style><div class="threestrap-ui threestrap-'+t+'">'+s.join("\n")+"</div>"},install:function(e){var t=this.ui=document.createElement("div");t.innerHTML=this.markup(e,this.options.theme,this.options.style),document.body.appendChild(t);var i=this.ui.fullscreen=t.querySelector("button.fullscreen");i&&e.bind([i,"click:goFullscreen"],this);var n=this.ui.vr=t.querySelector("button.vr");n&&e.VR&&(e.VR.set({mode:"2d"}),e.bind([n,"click:goVR"],this))},fullscreen:function(e,t){this.ui.style.display=e.active?"none":"block",e.active||t.VR&&t.VR.set({mode:"2d"})},goFullscreen:function(e,t){t.Fullscreen&&t.Fullscreen.toggle()},goVR:function(e,t){t.VR&&(t.VR.set({mode:"auto"}),t.Fullscreen.toggle())},uninstall:function(e){document.body.removeChild(this.ui)}}),e.Bootstrap.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(e){e.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},e)},uninstall:function(e){delete e.VR},mocks:function(e,t,i){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(e){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[e]},getRecommendedEyeFieldOfView:function(n){var s=e.camera,r=s&&s.aspect||16/9,o=(t||s&&s.fov||i)/2,a=180*Math.atan(Math.tan(o*Math.PI/180)*r/2)/Math.PI;return{left:{rightDegrees:a,leftDegrees:a,downDegrees:o,upDegrees:o},right:{rightDegrees:a,leftDegrees:a,downDegrees:o,upDegrees:o}}[n]}},{force:2,getState:function(){return{}}}]},load:function(e,t){var i=function(e){this.callback(e,t)}.bind(this);navigator.getVRDevices?navigator.getVRDevices().then(i):navigator.mozGetVRDevices?navigator.mozGetVRDevices(i):(console.warn("No native VR support detected."),i(this.mocks(t,this.options.fov,this.defaults.fov),t))},callback:function(e,t){var i,n,s=window.HMDVRDevice||function(){},r=window.PositionSensorVRDevice||function(){};e=t.VR.devices=e||t.VR.devices;var o=this.options.device;let a;for(let t=0;t<e.length;++t)if(a=e[t],1==a.force||a instanceof s){if(o&&o!=a.deviceId)continue;i=a;break}if(i){let s;for(let t=0;t<e.length;++t)if(s=e[t],2==s.force||s instanceof r&&s.hardwareUnitId==i.hardwareUnitId){n=s;break}this.hookup(i,n,t)}},hookup:function(t,i,n){e.VRRenderer||console.log("THREE.VRRenderer not found");var s=e.VRRenderer||function(){};this.renderer=new s(n.renderer,t),this.hmd=t,this.sensor=i,n.VR.renderer=this.renderer,n.VR.hmd=t,n.VR.sensor=i,console.log("THREE.VRRenderer",t.deviceName)},change:function(e,t){e.changes.device&&this.callback(null,t),this.pre(e,t)},pre:function(e,t){var i=this.active,n=this.active=this.renderer&&"2d"!=this.options.mode;if(t.VR.active=n,n&&this.sensor){var s=this.sensor.getState();t.VR.state=s}else t.VR.state=null;i!=this.active&&t.trigger({type:"vr",active:n,hmd:this.hmd,sensor:this.sensor})},resize:function(e,t){this.active&&this.renderer.initialize()},render:function(e,t){if(t.scene&&t.camera){var i=this.active?this.renderer:t.renderer;if(this.last!=i&&i==t.renderer){var n=i.getPixelRatio(),s=i.domElement.width/n,r=i.domElement.height/n;i.setScissorTest(!1),i.setViewport(0,0,s,r)}this.last=i,i.render(t.scene,t.camera)}}}),e.VRControls=function(t,i){var n,s,r=this,o=new e.Matrix4,a=null;"VRFrameData"in window&&(a=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then((function(e){s=e,e.length>0?n=e[0]:i&&i("VR input not available.")})).catch((function(){console.warn("THREE.VRControls: Unable to get VR Displays")})),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return n},this.setVRDisplay=function(e){n=e},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),s},this.getStandingMatrix=function(){return o},this.update=function(){var e;n&&(n.getFrameData?(n.getFrameData(a),e=a.pose):n.getPose&&(e=n.getPose()),null!==e.orientation&&t.quaternion.fromArray(e.orientation),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(n.stageParameters?(t.updateMatrix(),o.fromArray(n.stageParameters.sittingToStandingTransform),t.applyMatrix(o)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(r.scale))},this.dispose=function(){n=null}},e.MultiRenderer=function(t){console.log("THREE.MultiRenderer",e.REVISION),this.domElement=document.createElement("div"),this.domElement.style.position="relative",this.renderers=[],this._renderSizeSet=!1;for(var i=t.renderers||[],n=t.parameters||[],s=0;s<i.length;s++){var r=new i[s](n[s]);r.domElement.style.position="absolute",r.domElement.style.top="0px",r.domElement.style.left="0px",this.domElement.appendChild(r.domElement),this.renderers.push(r)}},e.MultiRenderer.prototype.setSize=function(e,t){this.domElement.style.width=e+"px",this.domElement.style.height=t+"px";for(var i=0;i<this.renderers.length;i++){var n=this.renderers[i],s=n.domElement;(!this._renderSizeSet||s&&"CANVAS"!==s.tagName)&&n.setSize(e,t),s.style.width=e+"px",s.style.height=t+"px"}},e.MultiRenderer.prototype.setRenderSize=function(e,t){this._renderSizeSet=!0;for(var i=0;i<this.renderers.length;i++){var n=this.renderers[i],s=n.domElement;s&&"CANVAS"===s.tagName&&n.setSize(e,t,!1)}},e.MultiRenderer.prototype.render=function(e,t){for(var i=0;i<this.renderers.length;i++)this.renderers[i].render(e,t)},e.VRRenderer=function(t,i){var n=this;n.initialize=function(){var t=i.getEyeTranslation("left");n.halfIPD=new e.Vector3(t.x,t.y,t.z).length(),n.fovLeft=i.getRecommendedEyeFieldOfView("left"),n.fovRight=i.getRecommendedEyeFieldOfView("right")},n.FovToNDCScaleOffset=function(e){var t=2/(e.leftTan+e.rightTan),i=(e.leftTan-e.rightTan)*t*.5,n=2/(e.upTan+e.downTan);return{scale:[t,n],offset:[i,(e.upTan-e.downTan)*n*.5]}},n.FovPortToProjection=function(e,t,i,s,r){s=void 0===s?.01:s,r=void 0===r?1e4:r;var o=(i=void 0===i||i)?-1:1,a=e.elements,l=n.FovToNDCScaleOffset(t);a[0]=l.scale[0],a[1]=0,a[2]=l.offset[0]*o,a[3]=0,a[4]=0,a[5]=l.scale[1],a[6]=-l.offset[1]*o,a[7]=0,a[8]=0,a[9]=0,a[10]=r/(s-r)*-o,a[11]=r*s/(s-r),a[12]=0,a[13]=0,a[14]=o,a[15]=0,e.transpose()},n.FovToProjection=function(e,t,i,s,r){var o={upTan:Math.tan(t.upDegrees*Math.PI/180),downTan:Math.tan(t.downDegrees*Math.PI/180),leftTan:Math.tan(t.leftDegrees*Math.PI/180),rightTan:Math.tan(t.rightDegrees*Math.PI/180)};return n.FovPortToProjection(e,o,i,s,r)};var s=new e.Vector3,r=new e.PerspectiveCamera,o=new e.PerspectiveCamera;n.render=function(e,i){n.FovToProjection(r.projectionMatrix,n.fovLeft,!0,i.near,i.far),n.FovToProjection(o.projectionMatrix,n.fovRight,!0,i.near,i.far),s.set(n.halfIPD,0,0),s.applyQuaternion(i.quaternion),r.position.copy(i.position).sub(s),o.position.copy(i.position).add(s),r.quaternion.copy(i.quaternion),o.quaternion.copy(i.quaternion);var a=t.devicePixelRatio||1,l=t.domElement.width/2/a,c=t.domElement.height/a;t.enableScissorTest(!0),t.setViewport(0,0,l,c),t.setScissor(0,0,l,c),t.render(e,r),t.setViewport(l,0,l,c),t.setScissor(l,0,l,c),t.render(e,o)},n.initialize()}})()})();
//# sourceMappingURL=threestrap.min.js.map